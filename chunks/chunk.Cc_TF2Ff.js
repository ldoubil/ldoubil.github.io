import{i as clsx$1}from"./chunk.CO0x50cG.js";import React,{createElement}from"react";import ReactDOM from"react-dom/server";const HYDRATION_START="[",HYDRATION_END="]",ELEMENT_IS_NAMESPACED=1,ELEMENT_PRESERVE_ATTRIBUTE_CASE=2,ATTR_REGEX=/[&"<]/g,CONTENT_REGEX=/[&<]/g;function escape_html(e,t){const r=String(e??""),n=t?ATTR_REGEX:CONTENT_REGEX;n.lastIndex=0;let o="",a=0;for(;n.test(r);){const e=n.lastIndex-1,t=r[e];o+=r.substring(a,e)+("&"===t?"&amp;":'"'===t?"&quot;":"&lt;"),a=e+1}return o+r.substring(a)}const replacements={translate:new Map([[!0,"yes"],[!1,"no"]])};function attr(e,t,r=!1){if(null==t||!t&&r||""===t&&"class"===e)return"";const n=e in replacements&&replacements[e].get(t)||t;return` ${e}${r?"":`="${escape_html(n,!0)}"`}`}function clsx(e){return"object"==typeof e?clsx$1(e):e??""}const whitespace=[..." \t\n\r\fÂ \v\ufeff"];function to_class(e,t,r){var n=null==e?"":""+e;if(r)for(var o in r)if(r[o])n=n?n+" "+o:o;else if(n.length)for(var a=o.length,s=0;(s=n.indexOf(o,s))>=0;){var c=s+a;0!==s&&!whitespace.includes(n[s-1])||c!==n.length&&!whitespace.includes(n[c])?s=c:n=(0===s?"":n.substring(0,s))+n.substring(c+1)}return""===n?null:n}const DOM_BOOLEAN_ATTRIBUTES=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","webkitdirectory","defer","disablepictureinpicture","disableremoteplayback"];function is_boolean_attribute(e){return DOM_BOOLEAN_ATTRIBUTES.includes(e)}const BLOCK_OPEN="\x3c!--[--\x3e",BLOCK_CLOSE="\x3c!--]--\x3e",INVALID_ATTR_NAME_CHAR_REGEX=/[\s'">/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;let on_destroy=[];function props_id_generator(){let e=1;return()=>"s"+e++}function render(e,t={}){const r=props_id_generator(),n={out:"",css:new Set,head:{title:"",out:"",css:new Set,uid:r},uid:r},o=on_destroy;on_destroy=[],n.out+="\x3c!--[--\x3e",t.context&&(push(),current_component.c=t.context),e(n,t.props??{},{},{}),t.context&&pop(),n.out+="\x3c!--]--\x3e";for(const e of on_destroy)e();on_destroy=o;let a=n.head.out+n.head.title;for(const{hash:e,code:t}of n.css)a+=`<style id="${e}">${t}</style>`;return{head:a,html:n.out,body:n.out}}function spread_attributes(e,t,r,n,o=0){e.class&&(e.class=clsx(e.class));let a,s="";const c=!(1&o),i=!(2&o);for(a in e)if("function"!=typeof e[a]&&("$"!==a[0]||"$"!==a[1])&&!INVALID_ATTR_NAME_CHAR_REGEX.test(a)){var u=e[a];i&&(a=a.toLowerCase()),s+=attr(a,u,c&&is_boolean_attribute(a))}return s}function sanitize_props(e){const{children:t,$$slots:r,...n}=e;return n}function ensure_array_like(e){return e?void 0!==e.length?e:Array.from(e):[]}var current_component=null;function push(e){current_component={p:current_component,c:null,d:null}}function pop(){var e=current_component,t=e.d;t&&on_destroy.push(...t),current_component=e.p}function createRawSnippet(e){return(t,...r)=>{var n=r.map((e=>()=>e));t.out+=e(...n).render().trim()}}function check$1(e){return"function"==typeof e&&e.toString().includes("$$payload")}function needsHydration$1(e){return!e.astroStaticSlot||!!e.hydrate}async function renderToStaticMarkup$1(e,t,r,n){const o=needsHydration$1(n)?"astro-slot":"astro-static-slot";let a,s;const c={};for(const[e,t]of Object.entries(r)){s??={},"default"===e?(s.default=!0,a=createRawSnippet((()=>({render:()=>`<${o}>${t}</${o}>`})))):s[e]=createRawSnippet((()=>({render:()=>`<${o} name="${e}">${t}</${o}>`})));c["default"===e?"children":e]=createRawSnippet((()=>({render:()=>`<${o}${"default"!==e?` name="${e}"`:""}>${t}</${o}>`})))}return{html:render(e,{props:{...t,children:a,$$slots:s,...c}}).body}}const _renderer0={name:"@astrojs/svelte",check:check$1,renderToStaticMarkup:renderToStaticMarkup$1,supportsAstroStaticSlot:!0},contexts=new WeakMap,ID_PREFIX="r";function getContext(e){if(contexts.has(e))return contexts.get(e);const t={currentIndex:0,get id(){return"r"+this.currentIndex.toString()}};return contexts.set(e,t),t}function incrementId(e){const t=getContext(e),r=t.id;return t.currentIndex++,r}const StaticHtml=({value:e,name:t,hydrate:r=!0})=>{if(!e)return null;return createElement(r?"astro-slot":"astro-static-slot",{name:t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:e}})};StaticHtml.shouldComponentUpdate=()=>!1;const slotName=e=>e.trim().replace(/[-_]([a-z])/g,((e,t)=>t.toUpperCase())),reactTypeof=Symbol.for("react.element"),reactTransitionalTypeof=Symbol.for("react.transitional.element");async function check(e,t,r){if("object"==typeof e)return e.$$typeof.toString().slice(7).startsWith("react");if("function"!=typeof e)return!1;if("QwikComponent"===e.name)return!1;if("function"==typeof e&&e.$$typeof===Symbol.for("react.forward_ref"))return!1;if(null!=e.prototype&&"function"==typeof e.prototype.render)return React.Component.isPrototypeOf(e)||React.PureComponent.isPrototypeOf(e);let n=!1;return await renderToStaticMarkup((function(...t){try{const r=e(...t);!r||r.$$typeof!==reactTypeof&&r.$$typeof!==reactTransitionalTypeof||(n=!0)}catch{}return React.createElement("div")}),t,r,{}),n}async function getNodeWritable(){let{Writable:e}=await import("node:stream");return e}function needsHydration(e){return!e.astroStaticSlot||!!e.hydrate}async function renderToStaticMarkup(e,t,{default:r,...n},o){let a;this&&this.result&&(a=incrementId(this.result));const s={prefix:a};delete t.class;const c={};for(const[e,t]of Object.entries(n)){const r=slotName(e);c[r]=React.createElement(StaticHtml,{hydrate:needsHydration(o),value:t,name:r})}const i={...t,...c},u=r??t.children;null!=u&&(i.children=React.createElement(StaticHtml,{hydrate:needsHydration(o),value:u}));const l=this?await getFormState(this):void 0;l&&(s["data-action-result"]=JSON.stringify(l[0]),s["data-action-key"]=l[1],s["data-action-name"]=l[2]);const d=React.createElement(e,i),p={identifierPrefix:a,formState:l};let F;return F="renderToReadableStream"in ReactDOM?await renderToReadableStreamAsync(d,p):await renderToPipeableStreamAsync(d,p),{html:F,attrs:s}}async function getFormState({result:e}){const{request:t,actionResult:r}=e;if(!r)return;if(!isFormRequest(t.headers.get("content-type")))return;const{searchParams:n}=new URL(t.url),o=await t.clone().formData(),a=o.get("$ACTION_KEY")?.toString(),s=n.get("_action");return a&&s?[r,a,s]:void 0}async function renderToPipeableStreamAsync(e,t){const r=await getNodeWritable();let n="";return new Promise(((o,a)=>{let s,c=ReactDOM.renderToPipeableStream(e,{...t,onError(e){s=e,a(s)},onAllReady(){c.pipe(new r({write(e,t,r){n+=e.toString("utf-8"),r()},destroy(){o(n)}}))}})}))}async function readResult(e){const t=e.getReader();let r="";const n=new TextDecoder("utf-8");for(;;){const{done:e,value:o}=await t.read();if(e)return o?r+=n.decode(o):n.decode(new Uint8Array),r;r+=n.decode(o,{stream:!0})}}async function renderToReadableStreamAsync(e,t){return await readResult(await ReactDOM.renderToReadableStream(e,t))}const formContentTypes=["application/x-www-form-urlencoded","multipart/form-data"];function isFormRequest(e){const t=e?.split(";")[0].toLowerCase();return formContentTypes.some((e=>t===e))}const _renderer1={name:"@astrojs/react",check:check,renderToStaticMarkup:renderToStaticMarkup,supportsAstroStaticSlot:!0},renderers=[Object.assign({name:"@astrojs/svelte",clientEntrypoint:"@astrojs/svelte/client.js",serverEntrypoint:"@astrojs/svelte/server.js"},{ssr:_renderer0}),Object.assign({name:"@astrojs/react",clientEntrypoint:"@astrojs/react/client.js",serverEntrypoint:"@astrojs/react/server.js"},{ssr:_renderer1})];export{attr as a,escape_html as b,pop as c,current_component as d,ensure_array_like as e,spread_attributes as f,push as p,renderers as r,sanitize_props as s,to_class as t};