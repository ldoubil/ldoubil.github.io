import{h}from"hastscript";function GithubCardComponent(e,t){if(Array.isArray(t)&&0!==t.length)return h("div",{class:"hidden"},['Invalid directive. ("github" directive must be leaf type "::github{repo="owner/repo"}")']);if(!e.repo||!e.repo.includes("/"))return h("div",{class:"hidden"},'Invalid repository. ("repo" attributte must be in the format "owner/repo")');const n=e.repo,a=`GC${Math.random().toString(36).slice(-6)}`,r=h(`div#${a}-avatar`,{class:"gc-avatar"}),i=h(`span#${a}-language`,{class:"gc-language"},"Waiting..."),s=h("div",{class:"gc-titlebar"},[h("div",{class:"gc-titlebar-left"},[h("div",{class:"gc-owner"},[r,h("div",{class:"gc-user"},n.split("/")[0])]),h("div",{class:"gc-divider"},"/"),h("div",{class:"gc-repo"},n.split("/")[1])]),h("div",{class:"github-logo"})]),c=h(`div#${a}-description`,{class:"gc-description"},"Waiting for api.github.com..."),o=h(`div#${a}-stars`,{class:"gc-stars"},"00K"),d=h(`div#${a}-forks`,{class:"gc-forks"},"0K"),l=h(`div#${a}-license`,{class:"gc-license"},"0K"),g=h(`script#${a}-script`,{type:"text/javascript",defer:!0},`\n      fetch('https://api.github.com/repos/${n}', { referrerPolicy: "no-referrer" }).then(response => response.json()).then(data => {\n        if (data.description) {\n          document.getElementById('${a}-description').innerText = data.description.replace(/:[a-zA-Z0-9_]+:/g, '');\n        } else {\n          document.getElementById('${a}-description').innerText = "Description not set"\n        }\n        document.getElementById('${a}-language').innerText = data.language;\n        document.getElementById('${a}-forks').innerText = Intl.NumberFormat('en-us', { notation: "compact", maximumFractionDigits: 1 }).format(data.forks).replaceAll(" ", '');\n        document.getElementById('${a}-stars').innerText = Intl.NumberFormat('en-us', { notation: "compact", maximumFractionDigits: 1 }).format(data.stargazers_count).replaceAll(" ", '');\n        const avatarEl = document.getElementById('${a}-avatar');\n        avatarEl.style.backgroundImage = 'url(' + data.owner.avatar_url + ')';\n        avatarEl.style.backgroundColor = 'transparent';\n        if (data.license?.spdx_id) {\n          document.getElementById('${a}-license').innerText = data.license?.spdx_id\n        } else {\n          document.getElementById('${a}-license').innerText = "no-license"\n        };\n          document.getElementById('${a}-card').classList.remove("fetch-waiting");\n          console.log("[GITHUB-CARD] Loaded card for ${n} | ${a}.")\n      }).catch(err => {\n        const c = document.getElementById('${a}-card');\n        c.classList.add("fetch-error");\n         console.warn("[GITHUB-CARD] (Error) Loading card for ${n} | ${a}.")\n      })\n    `);return h(`a#${a}-card`,{class:"card-github fetch-waiting no-styling",href:`https://github.com/${n}`,target:"_blank",repo:n},[s,c,h("div",{class:"gc-infobar"},[o,d,l,i]),g])}export{GithubCardComponent};